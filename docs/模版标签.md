# CMS 模板标签文档

## 内容相关标签

### 文章标签

| 标签名           | 用法                                                      | 必填属性               | 可选属性                   |
| ---------------- | --------------------------------------------------------- | ---------------------- | -------------------------- |
| `<@cms_article>` | 获取文章正文数据，标签内使用${ArticleContent}获取正文详情 | contentId: 文章内容 ID | page: 是否分页(默认 false) |

### 内容标签

| 标签名                   | 用法                                                                           | 必填属性                                  | 可选属性                                                                                                                                                                                                                                                                 |
| ------------------------ | ------------------------------------------------------------------------------ | ----------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `<@cms_content>`         | 获取内容数据列表，使用`<#list DataList as content>${content.name}</#list>`遍历 | -                                         | catalogid: 栏目 ID<br>catalogalias: 栏目别名<br>page: 是否分页<br>size: 分页数据条数(默认 20)<br>condition: 扩展 sql 条件<br>level: 数据获取范围<br>sort: 排序方式<br>hasattribute: 包含内容属性<br>noattribute: 不包含内容属性<br>status: 状态<br>topflag: 是否允许置顶 |
| `<@cms_content_closest>` | 获取内容前后篇，使用${Data.title}获取数据                                      | contentid: 内容 ID<br>type: 上一篇/下一篇 | sort: 排序方式                                                                                                                                                                                                                                                           |
| `<@cms_content_rela>`    | 获取相关内容列表                                                               | contentid: 内容 ID                        | page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件                                                                                                                                                                                                         |
| `<@cms_rela_content>`    | 相关内容标签                                                                   | -                                         | catalogid: 栏目 ID<br>keywords: 关键词<br>page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件                                                                                                                                                               |

### 栏目标签

| 标签名           | 用法                                                                           | 必填属性 | 可选属性                                                                                                                  |
| ---------------- | ------------------------------------------------------------------------------ | -------- | ------------------------------------------------------------------------------------------------------------------------- |
| `<@cms_catalog>` | 获取栏目数据列表，使用`<#list DataList as catalog>${catalog.name}</#list>`遍历 | -        | id: 栏目 ID<br>alias: 栏目别名<br>level: 数据获取范围<br>page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件 |

## 多媒体标签

### 图片标签

| 标签名         | 用法                                                                        | 必填属性               | 可选属性                                                         |
| -------------- | --------------------------------------------------------------------------- | ---------------------- | ---------------------------------------------------------------- |
| `<@cms_image>` | 获取图集图片列表，使用`<#list DataList as image>${image.title}</#list>`遍历 | contentid: 图集内容 ID | page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件 |

### 音频标签

| 标签名         | 用法                                                                      | 必填属性                 | 可选属性                                                         |
| -------------- | ------------------------------------------------------------------------- | ------------------------ | ---------------------------------------------------------------- |
| `<@cms_audio>` | 获取音频集列表，使用`<#list DataList as video>${video.title}</#list>`遍历 | contentid: 音频集内容 ID | page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件 |

### 视频标签

| 标签名         | 用法                                                                      | 必填属性                 | 可选属性                                                         |
| -------------- | ------------------------------------------------------------------------- | ------------------------ | ---------------------------------------------------------------- |
| `<@cms_video>` | 获取视频集列表，使用`<#list DataList as video>${video.title}</#list>`遍历 | contentid: 视频集内容 ID | page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件 |

## 功能性标签

### 页面部件标签

| 标签名                   | 用法                                       | 必填属性           | 可选属性          |
| ------------------------ | ------------------------------------------ | ------------------ | ----------------- |
| `<@cms_pagewidget>`      | 引用页面部件内容                           | code: 页面部件编码 | ssi: 是否启用 SSI |
| `<@cms_pagewidget_data>` | 获取页面部件数据，使用${Data.name}获取数据 | code: 页面部件编码 | -                 |

### 模板引用标签

| 标签名           | 用法             | 必填属性               | 可选属性                                                              |
| ---------------- | ---------------- | ---------------------- | --------------------------------------------------------------------- |
| `<@cms_include>` | 引用其他模板内容 | file: 引用模板文件路径 | ssi: 是否启用 SSI<br>virtual: 是否启用 virtual<br>cache: 是否启用缓存 |

### 分页标签

| 标签名        | 用法                 | 必填属性 | 可选属性                                                                            |
| ------------- | -------------------- | -------- | ----------------------------------------------------------------------------------- |
| `<@page_bar>` | 生成分页条 html 代码 | -        | type: 分页类型<br>target: 链接打开方式<br>first: 首页链接名称<br>last: 末页链接名称 |

## 扩展功能标签

### 站点相关标签

| 标签名                 | 用法                   | 必填属性 | 可选属性                                                                                               |
| ---------------------- | ---------------------- | -------- | ------------------------------------------------------------------------------------------------------ |
| `<@cms_site>`          | 获取站点列表           | -        | id: 站点 ID<br>level: 数据获取范围<br>page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件 |
| `<@cms_site_property>` | 获取站点自定义属性列表 | -        | siteid: 站点 ID<br>code: 属性编码<br>page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件  |

### 扩展模型标签

| 标签名                | 用法             | 必填属性                                                          | 可选属性                                                         |
| --------------------- | ---------------- | ----------------------------------------------------------------- | ---------------------------------------------------------------- |
| `<@cms_xmodel_data>`  | 获取扩展模型数据 | modelId: 模型 ID<br>dataType: 模型数据类型<br>dataId: 模型数据 ID | -                                                                |
| `<@cms_xmodel_field>` | 获取模型字段列表 | modelid: 模型 ID                                                  | page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件 |

### 友情链接标签

| 标签名              | 用法             | 必填属性           | 可选属性                                                                               |
| ------------------- | ---------------- | ------------------ | -------------------------------------------------------------------------------------- |
| `<@cms_link>`       | 获取友链列表     | code: 友链分组编码 | page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件                       |
| `<@cms_link_group>` | 获取友链分组列表 | -                  | code: 友链分组编码<br>page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件 |

### TAG 标签

| 标签名                  | 用法                | 必填属性              | 可选属性                                                                                |
| ----------------------- | ------------------- | --------------------- | --------------------------------------------------------------------------------------- |
| `<@cms_tag_word>`       | 获取 TAG 词列表     | group: TAG 词分组编码 | page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件                        |
| `<@cms_tag_word_group>` | 获取 TAG 词分组列表 | code: TAG 词分组编码  | level: 数据获取范围<br>page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件 |

### 搜索相关标签

| 标签名                  | 用法         | 必填属性 | 可选属性                                                                                                                                           |
| ----------------------- | ------------ | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| `<@cms_search_content>` | 检索内容标签 | -        | query: 检索词<br>catalogid: 栏目 ID<br>contenttype: 内容类型<br>mode: 检索方式<br>page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件 |
| `<@cms_search_word>`    | 搜索热词标签 | -        | page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件                                                                                   |

### 用户交互标签

| 标签名                    | 用法                 | 必填属性              | 可选属性                                                                           |
| ------------------------- | -------------------- | --------------------- | ---------------------------------------------------------------------------------- |
| `<@cms_comment>`          | 获取评论列表         | uid: 用户 ID          | type: 来源类型<br>page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件 |
| `<@cms_vote>`             | 获取调查问卷列表     | -                     | page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件                   |
| `<@cms_vote_subject>`     | 获取调查问卷主题列表 | code: 问卷调查编码    | page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件                   |
| `<@cms_favorite_content>` | 获取收藏内容列表     | -                     | uid: 用户 ID<br>page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件   |
| `<@cms_member_follow>`    | 获取关注/粉丝列表    | type: follow/follower | uid: 用户 ID<br>page: 是否分页<br>size: 分页数据条数<br>condition: 扩展 sql 条件   |

### 其他标签

| 标签名               | 用法                     | 必填属性 | 可选属性 |
| -------------------- | ------------------------ | -------- | -------- |
| `<@cms_stat>`        | 插入内置访问统计脚本代码 | -        | -        |
| `<@cms_custom_form>` | 获取自定义表单数据       | -        | -        |
